import {
  require_jsx_runtime
} from "./chunk-C7YDEIUH.js";
import "./chunk-RDFXPUXV.js";
import {
  useNavigate
} from "./chunk-VXMOUB5J.js";
import "./chunk-UOL6SM4K.js";
import {
  require_react
} from "./chunk-5ULDFCBR.js";
import {
  __toESM
} from "./chunk-5WRI5ZAA.js";

// node_modules/@shopify/shopify-app-react-router/dist/esm/react/components/AppProvider/AppProvider.mjs
var import_jsx_runtime = __toESM(require_jsx_runtime(), 1);
var import_react = __toESM(require_react(), 1);
function AppProvider(props) {
  return (0, import_jsx_runtime.jsxs)(import_jsx_runtime.Fragment, { children: [props.embedded && (0, import_jsx_runtime.jsx)(AppBridge, { apiKey: props.apiKey }), (0, import_jsx_runtime.jsx)("script", { src: "https://cdn.shopify.com/shopifycloud/app-bridge-ui-experimental.js" }), props.children] });
}
function AppBridge({ apiKey }) {
  const navigate = useNavigate();
  (0, import_react.useEffect)(() => {
    const handleNavigate = (event) => {
      const href = event.target?.getAttribute("href");
      if (href) {
        navigate(href);
      }
    };
    document.addEventListener("shopify:navigate", handleNavigate);
    return () => {
      document.removeEventListener("shopify:navigate", handleNavigate);
    };
  }, [navigate]);
  return (0, import_jsx_runtime.jsx)("script", { src: "https://cdn.shopify.com/shopifycloud/app-bridge.js", "data-api-key": apiKey });
}

// node_modules/@shopify/shopify-app-react-router/dist/esm/react/components/AppProxyProvider/AppProxyProvider.mjs
var import_jsx_runtime2 = __toESM(require_jsx_runtime(), 1);
var import_react2 = __toESM(require_react(), 1);
var AppProxyProviderContext = (0, import_react2.createContext)(null);
function AppProxyProvider(props) {
  const { children, appUrl } = props;
  const [requestUrl, setRequestUrl] = (0, import_react2.useState)();
  (0, import_react2.useEffect)(() => setRequestUrl(new URL(window.location.href)), [setRequestUrl]);
  return (0, import_jsx_runtime2.jsxs)(AppProxyProviderContext.Provider, { value: { appUrl, requestUrl, formatUrl: formatProxyUrl(requestUrl) }, children: [(0, import_jsx_runtime2.jsx)("base", { href: appUrl }), children] });
}
function formatProxyUrl(requestUrl) {
  return (url, addOrigin = true) => {
    if (!url) {
      return url;
    }
    let finalUrl = url;
    if (addOrigin && requestUrl && finalUrl.startsWith("/")) {
      finalUrl = new URL(`${requestUrl.origin}${url}`).href;
    }
    if (!finalUrl.endsWith("/")) {
      finalUrl = `${finalUrl}/`;
    }
    return finalUrl;
  };
}

// node_modules/@shopify/shopify-app-react-router/dist/esm/react/components/AppProxyLink/AppProxyLink.mjs
var import_jsx_runtime3 = __toESM(require_jsx_runtime(), 1);
var import_react3 = __toESM(require_react(), 1);
function AppProxyLink(props) {
  const context = (0, import_react3.useContext)(AppProxyProviderContext);
  if (!context) {
    throw new Error("AppProxyLink must be used within an AppProxyProvider component");
  }
  const { children, href, ...otherProps } = props;
  return (0, import_jsx_runtime3.jsx)("a", { href: context.formatUrl(href), ...otherProps, children });
}
export {
  AppProvider,
  AppProxyLink,
  AppProxyProvider,
  AppProxyProviderContext
};
//# sourceMappingURL=@shopify_shopify-app-react-router_react.js.map
